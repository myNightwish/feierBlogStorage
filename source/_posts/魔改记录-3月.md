---
layout: 
- post 
- music
- archive
title: 魔改记录-3月
date: 2022-03-17 22:02:28
tags: PicGo、cdn.jsdelivr、githubPages、Hexos
description: 记录交完论文后的魔改~
cover: https://cdn.jsdelivr.net/gh/myNightwish/CDN_res/img/bb.avif
copyright_author: 飞儿
copyright_url: 'https://www.nesxc.com/post/hexocc.html'
license: CC BY-NC-SA 4.0
license_url: 'https://creativecommons.org/licenses/by-nc-sa/4.0/'
categories: 碎碎念
---
## 2022-3月魔改记录 ##

### 1、填坑功能： ###

#### 访问足迹页面： ####

* 背景色更换；
* 更新token，百度站点上过期了；

#### 日历： ####

* 已实现放在时间轴页面 
* 找到了插件魔改的方法啦，请看readme文件，回忆一下

#### 分类页面： ####

* 已填坑，同上
* 希望扩展功能：新增子分类
* 就在刚刚发现**新bug**：
  * 从导航其他页面回来，分类就丢失了.....

### 2、优化功能： ###

#### JSD+PicGo加速图片： ####

* 本期改版了页面图片的风格，偏清新一点
* 图片以前是图片网站的链接，此次换成了Github图床、Jsd加速搭配使用的方式。也算是缓解了一下一直以来，**图片存储的痛点**。首屏太慢了，我很嫌弃。
* **待研究：**
  * 前期几张照片，用的png形式，用webp、avrif形式更好。下次风格改版时，再做；
  * 图片版本更新问题：

#### 站点收录： ####

* 谷歌、百度站点收录：提交sitemap文件
* 增加蜘蛛，配置爬虫的文件：robost.txt
* **新坑：**
  * 为啥站点地图提交成功，但谷歌显示未收录.....
  * 百度抓取失败.....

#### 针对LighHouse跑分优化： ####

* 首先，表演一下，SEO表现很好
* 调整了没有用到的引入标签；
* 对于阻塞渲染的标签，不着急出现的，更改属性为defer或async
* 对于图片：换成了Jsd加速。

### 3、本期新增： ###

#### twikoo评论+美化： ####

* 通过vercel部署的，支持不用登录，即可评论啦。
* 但不支持插入图片，因为支持的图床没有picGo，sad。
* 待研究：
  * 后期在考虑vercel的免费部署

#### 音乐music页面： ####

* 新增加了喜欢的歌单页面，可以随便点
* **待研究：**但页面太长了，所以有什么办法，这页像首页那样，只展示目录；
* 后续会改动，暂时内容待定；

#### 视频movie页面： ####

新增了一些觉得有意思的视频：

* 借助外挂：tag-plugin-pro，我没有用原始的，这个外挂，因为可以自己参与魔改，更自由
* **待研究：**同音频

#### books页面： ####

* 新增豆瓣外挂：但书和电影还没看完。。

#### 字体： ####

* 新增了字体文件；
* 中文、英文不同：因为中文字体Candy英文不好看；
* 文章页面：字体不是Candy，考虑到正文看不舒服，所以这个字体是最简单的样式

#### 其他： ####

* 砍掉了右侧aside的模块，如标签；

* 魔改了右侧aside中的时钟显示：**但有问题:**

  这个是通过ip查询地址对应的天气数据，当开vpn，某些地区获取的信息不对；所以显示的很奇怪；
* 下期魔改下加密文章，哈哈

### 4、遇到的问题： ###

#### 压缩问题：  很头疼 ####

* **目的：**预期希望对编译后的文件：压缩CSS、JS、img。希望首屏更快
* **做法：**用了一个gulp的js压缩文件，借助webpack插件压缩。在编译后生成public的文件 -----> 压缩 ---->deploy后。。这样很完美对吧。。**部署后，就样式丢失了.sad**

#### 部署后，样式丢失： ####

* 前提：由于之前手动配的workflow总是部署错误，so暂时取消了自己的workflow。直接hexo deploy后，由博客显示仓库对应的github pages走自己的workflow
* 问题：
  1. 如果部署前，gulp了，线上一定gg；
  2. 如果部署前没有gulp，有gg的可能；

* ##### 原来出现的类似状况：原因有以下几种： #####

  * ##### 状况1： #####

    因为域名CAME的问题，需要每次收到更新rename；

    解决：在source文件下，加CAME文件，填写你的域名喔~

  * ##### 状况2： #####

    * gulp了部署失败。不gulp又好了，有时又失败；
    * 有时明明部署好了，强刷新后也是好的&刚更新的内容，过个2分钟，样式挂了~

  * ##### 状况3： #####

    原本在windows电脑上，我的主题更改文件直接去hexo-theme-butterfly下去做的，这样在打包部署上线时，会分析相关文件，然后最终生成静态资源，部署到仓库：myNightwish.github.io，这没问题。

    问题分析：

    * 但当我用另一台Macpull下来代码，就会发现效果没有魔改文件生效的样子，为什么呢？
    * 因为之前的魔改文件在nodeModelues文件里，部署时，这个文件是gitignore的，当然我们不能在ignore取消这个文件的上传，因为根本没有必要上传嘛~远端服务器会自己去npm库里安装的。
    * 所以这个文件在我的private仓库：fererStorage里根本就没有魔改文件，so当我用另一台电脑拉下来的时候，**当然不可能有原来的魔改效果呀**
    * **这样其实非常危险~**：如果我windows电脑本地代码丢失，所有为魔改的折腾全部完蛋！！！

    问题解决：于是我痛下决心，将所有的魔改效果迁移了一下

    * 在根目录下新建butterfly，将相关文件夹迁移即可；
    * 同时整理了之前的魔改文件，删除&简化了部分代码；